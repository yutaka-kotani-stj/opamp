# 概要
OPAMPを1um CMOS processで作ります。目的はアナログICの設計方法を理解するためなので市販品の安価な汎用OPAMPに負>ける性能でよしとし、目的に必要な最低限の性能を目指します。
今回使用するFabは1um CMOS processなので、CMOSトランジスタのドレインからソースまでのチャネル長さLの最小値は1umです。１つのダイの上に、乗合で回路を乗せるので、面積制約があります。使用可能なピン本数も制約があります。
| 項目  | 内容 |
| ------------- | ------------- |
| 使用可能回路面積  |   600um x 200umまで |
| 使用可能ピン本数  | 5ピンまで（VSSは除く） |
| 基準電流源  | 外付け10uA |

# 使用したソフト環境
| 項目  | 内容 |
| ------------- | ------------- |
| 回路図設計  |   Xschem |
| 回路シミュレーション | ngspice |
| レイアウト設計| klayout |
| グラフ作成 | Gnuplot |
| OS | Ubuntu |

# Fabに依存するデータ
| 項目  | 内容 |
| ------------- | ------------- |
| ngspice用のCMOSの特性データ | Fab提供のPDK BSIM3 (level49)|
| klayoutのPCell | Fab提供のPDK|

# 設計目標仕様
マイクロフォンから入力して、イヤホンをならすことができる最低限のOPAMPにしたいと思います。
電源電圧は、一般的な5Vとします。入力電圧はマイクロフォンなので2mV程度を想定します。最大出力はイヤホンから音を
聞きたいので5mWとします。最大出力電流は、出力1Vのとき、5mA最大とします。
入力2mVp-pから出力3Vp-pに増幅したいため、クローズドループゲインは1500倍つまり63.52dB必要です。周波数は人間の>可聴周波数20Khzの2倍の40khzあればよいです。オープンループゲインはクローズドループゲインの10倍あれば十分なので
84dBとします。
| 項目  | 内容 |
| ------------- | ------------- |
| 電源電圧 | 5V |
| 入力振幅電圧 | 2mVp-p |
| 最大周波数 | 40Khz |
| 最大出力 | 5mW|
| 最大出力振幅電圧 | 3Vp-p|
| 最大出力電流 | 5mA@1V|
| 出力電圧範囲 | 1-4V |
| クローズドループゲイン | 64dB@40khz |
| オープンループゲイン | 84dB@40khz |

# OPAMPのスルー・レート
波形が歪まないためのスルーレートの条件は
SR >= 2pi * f * Vp
SR:スルーレート
pi:円周率
f:周波数
Vp:電圧振幅
ですので、
